<link rel="import" href="../polymer/polymer.html"> <dom-module id="simple-callout"> <template> <style>*,::after,::before,:host{box-sizing:border-box;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-smoothing:antialiased}:host{position:relative;display:none;background:#fff;border-radius:3px;will-change:transform;box-shadow:0 1px 2px rgba(0,0,0,.2),0 0 1px rgba(0,0,0,.1)}:host([visible]){display:inline-block}:host([arrow])::before{content:'';position:absolute;height:var(--simple-callout-arrow-size,8px);width:var(--simple-callout-arrow-size,8px);-webkit-transform:rotate(45deg);transform:rotate(45deg);background:inherit}:host([arrow]) ::content *{position:relative;z-index:1}:host([arrow][origin*=top]){-webkit-transform:translateY(calc(var(--simple-callout-arrow-size,8px)/ 2));transform:translateY(calc(var(--simple-callout-arrow-size,8px)/ 2))}:host([arrow][origin*=top])::before{top:calc(0px - var(--simple-callout-arrow-size,8px)/ 2);box-shadow:-1px -1px rgba(0,0,0,.075);border-top-left-radius:2px}:host([arrow][origin*=bottom]){-webkit-transform:translateY(calc(0 - var(--simple-callout-arrow-size,8px)/ 2));transform:translateY(calc(0 - var(--simple-callout-arrow-size,8px)/ 2))}:host([arrow][origin*=bottom])::before{bottom:calc(0px - var(--simple-callout-arrow-size,8px)/ 2);box-shadow:1px 1px 1px rgba(0,0,0,.2);border-bottom-right-radius:2px}:host([arrow][origin*=left])::before{left:var(--simple-callout-arrow-size,8px)}:host([arrow][origin*=center])::before{left:calc(50% - var(--simple-callout-arrow-size,8px)/ 2)}:host([arrow][origin*=right])::before{right:var(--simple-callout-arrow-size,8px)}:host([arrow][origin=left]){-webkit-transform:translateX(calc(var(--simple-callout-arrow-size,8px)/ 2));transform:translateX(calc(var(--simple-callout-arrow-size,8px)/ 2))}:host([arrow][origin=left])::before{top:calc(50% - var(--simple-callout-arrow-size,8px)/ 2);left:calc(0px - var(--simple-callout-arrow-size,8px)/ 2);box-shadow:-1px 1px 1px rgba(0,0,0,.075);border-bottom-left-radius:2px}:host([arrow][origin=right]){-webkit-transform:translateX(0 - calc(var(--simple-callout-arrow-size,8px)/ 2));transform:translateX(0 - calc(var(--simple-callout-arrow-size,8px)/ 2))}:host([arrow][origin=right])::before{top:calc(50% - var(--simple-callout-arrow-size,8px)/ 2);right:calc(0px - var(--simple-callout-arrow-size,8px)/ 2);box-shadow:1px -1px 0 rgba(0,0,0,.075);border-top-right-radius:2px}</style> <content></content> </template> <script src="../web-animations-js/web-animations.min.js">!function(){"use strict"}()</script> <script>!function(){"use strict";var e="cubic-bezier(0.4, 0.0, 0.2, 1)",t=[{frames:[{transform:"scale(0.75, 0.85)"},{transform:"scale(1)"}],opts:{easing:e,fill:"both",duration:120}},{frames:[{opacity:0},{opacity:1}],opts:{easing:"ease",fill:"both",duration:90}}],n={properties:{active:{type:Boolean,observer:"_activeChanged",notify:!0},visible:{type:Boolean,reflectToAttribute:!0},_opened:Boolean,noOutsideClick:Boolean,noEscape:Boolean},open:function(){this.active=!0},close:function(){this.active=!1},toggle:function(){this.active=!this._active},_activeChanged:function(e,t){e?this._showCallout():t&&this._hideCallout()},_showCallout:function(){var e=this,n=function(t){var n=t.frames,i=t.opts;return e.animate(n,i)},i=function(e){return new Promise(function(t){return e.onfinish=t})};this.visible=!0,Promise.all(t.map(n).map(i)).then(function(){e._forceRepaint(),e._opened=!0})},_hideCallout:function(){var e=this,n=function(t){var n=t.frames,i=t.opts;return e.animate(n.slice().reverse(),i)},i=function(e){return new Promise(function(t){return e.onfinish=t})};this._opened=!1,Promise.all(t.map(n).map(i)).then(function(){return e.visible=!1})},_closeOnEsc:function(){var e=this;document.addEventListener("keyup",function(t){e.noEscape||27!==t.keyCode||(e.active=!1)})},_closeOnClick:function(){var e=this,t=function(t){!e.noOutsideClick&&e._opened&&t.target!==e&&(e.active=!1)};document.addEventListener("click",t),document.addEventListener("touchend",t)},_forceRepaint:function(){this.style.display="none",this.offsetHeight,this.style.display=""},attached:function(){this._closeOnEsc(),this._closeOnClick()}},i=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){i(this,e)}return o(e,[{key:"beforeRegister",value:function(){this.is="simple-callout",this.properties={origin:{type:String,reflectToAttribute:!0,observer:"_setTransformOrigin"},arrow:{type:Boolean,reflectToAttribute:!0}}}},{key:"_setTransformOrigin",value:function(e){e&&(this.style["transform-origin"]=e)}},{key:"behaviors",get:function(){return[n]}}]),e}();Polymer(r)}()</script> </dom-module>